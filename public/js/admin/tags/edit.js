(()=>{var e=[];document.querySelectorAll(".tags-input").forEach((function(t){var n=new Tagify(t,{whitelist:window.existingTags,originalInputValueFormat:function(e){return e.map((function(e){return e.value})).join(", ")},dropdown:{maxItems:20,enabled:0,closeOnSelect:!1}});e.push(n)})),$(document).on("submit",".image-update-form",(function(t){t.preventDefault();var n=$(this).find("[type=submit]");n.prop("disabled",!0);var s=$(this).closest(".image-form-container");return $.ajax(this.action,{type:"POST",data:new FormData(this),success:function(t){s.html(t["edit-view"]),e.forEach((function(e){try{e.settings.whitelist=t["tag-list"]}catch(e){}}));var i=new Tagify(s.find(".tags-input")[0],{whitelist:t["tag-list"],originalInputValueFormat:function(e){return e.map((function(e){return e.value})).join(", ")},dropdown:{maxItems:20,enabled:0,closeOnSelect:!1}});e.push(i),n.prop("disabled",!1),$(window).trigger("resize"),$.notify({icon:"image",message:"Image was successfully saved."},{type:"success",timer:4e3,placement:{from:"top",align:"right"}})},error:function(e){var t=e.status;e.responseJSON?t=e.responseJSON.message:e.responseText&&(t=e.responseText),n.prop("disabled",!1),e.responseJSON&&e.responseJSON.errors&&console.log(e.responseJSON.errors),$.notify({icon:"image",message:"Error while saving image: "+t},{type:"danger",timer:4e3,placement:{from:"top",align:"right"}})},cache:!1,contentType:!1,processData:!1}),!1}))})();